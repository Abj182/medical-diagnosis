<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Login â€¢ MedAssist</title>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="/static/styles.css" />
	<style>
		.center { display:flex; align-items:center; justify-content:center; height:100vh; }
		.card { width: 380px; background:#0f1730; border:1px solid var(--border); border-radius:14px; padding:20px; box-shadow:0 12px 32px rgba(0,0,0,.35); }
		.card h2 { margin:0 0 6px 0; }
		.actions { display:flex; gap:10px; align-items:center; }
		.link { color:#9db7ff; text-decoration:none; font-size:13px; }
	</style>
</head>
<body>
	<div class="center">
		<div class="card">
			<h2>Welcome back</h2>
			<p class="small">Login to access your medical assistant</p>
			<div style="display:flex; flex-direction:column; gap:10px; margin-top:12px;">
				<input id="email" placeholder="email" />
				<input id="password" placeholder="password" type="password" />
				<div class="actions">
					<button id="login">Login</button>
					<a class="link" href="/register">Create account</a>
				</div>
			</div>
		</div>
	</div>
	<script>
	async function api(path, method = 'GET', body) {
		const res = await fetch(path, {
			method,
			headers: { 'Content-Type': 'application/json' },
			body: body ? JSON.stringify(body) : undefined,
		});
		return res.json();
	}
	document.getElementById('login').onclick = async () => {
		const email = document.getElementById('email').value.trim();
		const password = document.getElementById('password').value;
		const res = await api('/api/auth/login', 'POST', { email, password });
		if (res.access_token) {
			localStorage.setItem('medassist_token', res.access_token);
			localStorage.setItem('medassist_user', JSON.stringify(res.user));
			location.href = '/home';
		} else {
			alert(res.error || 'Login failed');
		}
	};
	</script>
</body>
</html>
