<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Login â€¢ MedAssist</title>
	<link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
	<div class="container" style="min-height:100vh; display:grid; place-items:center;">
		<div class="card" style="width:420px; max-width:100%;">
			<h2 class="title">Welcome back</h2>
			<p class="sub">Sign in to access your chats</p>
			<div class="form" style="margin-top:12px;">
				<input id="email" class="input" placeholder="Email" />
				<input id="password" class="input" type="password" placeholder="Password" />
				<button id="login" class="btn">Login</button>
				<a class="link" href="/register">Create an account</a>
			</div>
		</div>
	</div>
	<script>
	async function api(path, method='GET', body){
		const r = await fetch(path,{method,headers:{'Content-Type':'application/json'},body: body?JSON.stringify(body):undefined});
		return r.json();
	}
	document.getElementById('login').onclick = async()=>{
		const email = document.getElementById('email').value.trim();
		const password = document.getElementById('password').value;
		const res = await api('/api/auth/login','POST',{email,password});
		if(res.access_token){ localStorage.setItem('medassist_token',res.access_token); localStorage.setItem('medassist_user',JSON.stringify(res.user)); location.href='/home'; }
		else alert(res.error||'Login failed');
	};
	</script>
</body>
</html>
