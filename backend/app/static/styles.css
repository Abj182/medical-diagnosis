:root { --bg-primary:#ffffff; --bg-secondary:#f7f7f8; --bg-tertiary:#ececf1; --text-primary:#202123; --text-secondary:#565869; --border-color:#d9d9e3; --accent-color:#10a37f; --accent-hover:#0d8c6d; --sidebar-width:260px; --message-bot-bg:#f7f7f8; --message-user-bg:#10a37f; --shadow:0 2px 10px rgba(0,0,0,.08); }
[data-theme="dark"] { --bg-primary:#343541; --bg-secondary:#444654; --bg-tertiary:#565869; --text-primary:#ececf1; --text-secondary:#c5c5d2; --border-color:#565869; --accent-color:#19c37d; --accent-hover:#15a36d; --message-bot-bg:#444654; --message-user-bg:#19c37d; --shadow:0 2px 10px rgba(0,0,0,.30); }
*{ box-sizing:border-box; }
body{ margin:0; font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Oxygen,Ubuntu,Cantarell,sans-serif; background:var(--bg-primary); color:var(--text-primary); }

/* Layout */
.layout { display:grid; grid-template-columns: var(--sidebar-width) 1fr; height:100vh; }
.layout.sidebar-collapsed{ grid-template-columns: 0 1fr !important; }
.layout.sidebar-collapsed .sidebar{ display:none; }

/* Sidebar */
.sidebar{ background:var(--bg-secondary); border-right:1px solid var(--border-color); display:flex; flex-direction:column; overflow:auto; }
.sidebar h3{ margin:0; padding:16px; border-bottom:1px solid var(--border-color); display:flex; align-items:center; gap:8px; color:var(--text-primary); }
.chip{ padding:6px 10px; border-radius:8px; border:1px solid var(--border-color); background:var(--bg-primary); cursor:pointer; color:var(--text-primary); font-size:12px; }
.chip.active{ background:var(--accent-color); border-color:var(--accent-color); color:#fff; }
.chipbar{ display:flex; gap:6px; padding:8px 16px; border-bottom:1px solid var(--border-color); }
#recents{ padding:8px; display:flex; flex-direction:column; gap:6px; }
.sidebar .item{ padding:12px; border-radius:8px; border:1px solid transparent; background:transparent; color:var(--text-primary); cursor:pointer; }
.sidebar .item:hover{ background:var(--bg-tertiary); }
.sidebar .item.active{ background:var(--bg-tertiary); border-color:var(--accent-color); }

/* Topbar */
.topbar{ padding:12px 16px; border-bottom:1px solid var(--border-color); background:var(--bg-primary); display:flex; align-items:center; justify-content:space-between; }
.badge{ background:var(--bg-secondary); color:var(--text-secondary); border:1px solid var(--border-color); border-radius:999px; padding:6px 10px; font-size:12px; }

/* Chat shell */
#chatShell{ height: calc(100vh - 120px) !important; }
.messages{ overflow:auto; min-height:0; padding:24px; display:flex; flex-direction:column; gap:12px; }
.message{ padding:16px 20px; border-radius:12px; line-height:1.6; max-width:85%; box-shadow:none; animation: fadeIn .2s ease; }
.message.user{ background:var(--message-user-bg); color:#fff; margin-left:auto; }
.message.bot{ background:var(--message-bot-bg); color:var(--text-primary); }
@keyframes fadeIn{ from{ opacity:0; transform:translateY(6px); } to{ opacity:1; transform:translateY(0); } }

/* Footer / Composer */
.footer-bar{ position:sticky; bottom:0; background:var(--bg-primary); border-top:1px solid var(--border-color); padding:14px; display:flex; gap:10px; align-items:center; }
.footer-bar input{ flex:1; padding:14px 16px; border-radius:12px; border:1px solid var(--border-color); background:var(--bg-secondary); color:var(--text-primary); outline:none; }
.footer-bar input::placeholder{ color:var(--text-secondary); }
.footer-bar .mic{ width:44px; height:44px; border-radius:8px; border:1px solid var(--border-color); background:var(--bg-secondary); color:var(--text-primary); }
.footer-bar button#send{ padding:12px 18px; border-radius:10px; background:var(--accent-color); color:#fff; border:none; box-shadow:var(--shadow); }
.footer-bar button#send:hover{ background:var(--accent-hover); }
button:disabled{ opacity:.55; cursor:not-allowed; }

/* Overlay */
.overlay{ position:fixed; right:20px; bottom:78px; width:380px; background:var(--bg-secondary); border:1px solid var(--border-color); border-radius:12px; padding:14px; box-shadow:var(--shadow); }
.overlay h4{ margin:0 0 6px 0; color:var(--text-primary); }
.overlay .content{ max-height:260px; overflow:auto; font-size:13px; color:var(--text-primary); }
.overlay-toggle{ position: fixed; right: 20px; bottom: 20px; width:44px; height:44px; border-radius:10px; border:1px solid var(--border-color); background:var(--bg-secondary); color:var(--text-primary); display:flex; align-items:center; justify-content:center; box-shadow:var(--shadow); }

/* Opener for collapsed sidebar */
.side-opener{ position:fixed; left:10px; top:10px; width:40px; height:40px; border-radius:10px; border:1px solid var(--border-color); background:var(--bg-secondary); color:var(--text-primary); display:flex; align-items:center; justify-content:center; box-shadow:var(--shadow); z-index:50; }
.side-opener.hidden{ display:none; }
